1.目录结构
Baidu_HW_design_toolkit提供了制作fpga硬件逻辑所需的环境，您只将自己逻辑所需的相关的文件如rtl代码，ip核，xdc约束等放入指定的路径，然后执行脚本，即可生成用于烧写fpga云服务器的逻辑镜像文件。
Baidu_HW_design_toolkit包含了三个子文件夹，分别是build，common_files和usr_files。
usr_files存放用户的工程设计文件，它包含了4个子文件夹，usr_rtl用于存放用户逻辑使用的rtl文件，usr_xdc用于存放用户逻辑所需的约束文件，usr_ip用于存放用户逻辑所使用的ip xci文件。usr_ip_resposity用于存放用户自己封装的ip库。
common_files存放fpga云服务器工程的一些通用设计。static_fix_dcp中保存的是工程的静态部分dcp，包括pcie控制器和支持xvc所需的ip core。hdl存放了一个rp_bd_wrapper.v的rtl文件，这可以算是fpga云服务器工程中静态部分逻辑与动态部分逻辑的一个接口。您要实现的定制逻辑就是rp_bd_wrapper中实例化的rp_bd模块。Constraints存放了对rp_bd_wrappe模块进行ooc综合所需的约束文件，ref_xdc存放了fpga云服务器的内存控制器引脚约束。通常情况下，我们不建议您修改common_files目录中的内容。
build存放制作fpga云服务器逻辑镜像所要执行的脚本，如果您是有经验的用户，可以参考并根据自己的需要修改脚本

2.制作fpga云服务逻辑镜像步骤
Baidu_HW_design_toolkit提供了两种方式制作fpga云服务器逻辑镜像。两种方式需要准备不同的设计文件，您可以任选一种自己喜欢的方式。

1) Non_IPI流程，这种方式比较类似传统的fpga工程实现方式，您需要准备好动态部分逻辑（也就是rp_bd_wrapper.rp_bd_i）的设计文件放入usr_files指定的目录， 然后执行build目录下的run_nonIPI.tcl脚本。制作逻辑镜像的过程，具体步骤如下所示。由于默认的Baidu_HW_design_toolkit/usr_files目录里已经包含了demoPrj工程的设计文件，您也可以跳过a~d，直接从e步骤开始，执行脚本体验制作云服务器逻辑镜像的过程。
a.用户定制rp_bd所用到的约束文件，需全部拷贝到工具包中Baidu_HW_design_toolkit/usr_files/usr_xdc目录下。
b.用户定制rp_bd所用到的rtl文件，需全部拷贝到工具包中Baidu_HW_design_toolkit/usr_files/usr_rtl目录下。
c.用户定制rp_bd所用到的ip core文件，需全部拷贝到工具包中Baidu_HW_design_toolkit/usr_files/usr_ip目录下。
d.用户定制rp_bd所用到的自己封装的ip库，需全部拷贝到工具包中Baidu_HW_design_toolkit/usr_files/usr_ip_resposity目录下。
e.打开Baidu_HW_design_toolkit/build/scripts/step_00_setup.tcl，确认如下四行是否一致
set USE_DDR4_C0 0
set USE_DDR4_C1 0
set USE_DDR4_C2 0
set USE_DDR4_C3 0
f.进入Baidu_HW_design_toolkit/build目录，执行vivado -mode tcl
g.执行source ./run_nonIPI.tcl
h.制作fpga云服务逻辑镜像完成，你可以从Baidu_HW_design_toolkit/build/proDir/Bitstreams/ver2文件夹下面看到生成的镜像文件。

2) IPI流程，这种方式采用vivado IP Integrator制作云服务逻辑镜像的动态部分逻辑（也就是rp_bd_wrapper.rp_bd_i）。你需要准备好IPI的设计文件放入usr_files和build下制定的目录，然后执行build目录下的run_IPI.tcl脚本。制作逻辑镜像的过程，具体步骤如下所示。由于默认的Baidu_HW_design_toolkit/usr_files目录里已经包含了demoPrj工程的IPI设计文件，您也可以跳过a~d，直接从e步骤开始，执行脚本体验制作云服务器逻辑镜像的过程。
a.用户定制rp_bd block design所用到的约束文件，需全部拷贝到工具包中Baidu_HW_design_toolkit/usr_files/usr_xdc目录下。
b.用户定制rp_bd block design所用到的rtl文件，需全部拷贝到工具包中Baidu_HW_design_toolkit/usr_files/usr_rtl目录下。
c.用户定制rp_bd block design所用到的自己封装的ip库，需全部拷贝到工具包中Baidu_HW_design_toolkit/usr_files/usr_ip_resposity目录下。
d.用户定制rp_bd block design所用到的tcl文件，需命名为rp_bd.tcl并拷贝到工具包中Baidu_HW_design_toolkit/build/scripts目录下。
e.打开Baidu_HW_design_toolkit/build/scripts/step_00_setup.tcl，确认如下四行是否一致
set USE_DDR4_C0 0
set USE_DDR4_C1 0
set USE_DDR4_C2 0
set USE_DDR4_C3 0
f.进入Baidu_HW_design_toolkit/build目录，执行vivado -mode tcl
g.执行source ./run_IPI.tcl
h.制作fpga云服务逻辑镜像完成，你可以从Baidu_HW_design_toolkit/build/proDir/Bitstreams/ver2文件夹下面看到生成的镜像文件。
